;{#'<>~P~L#MM@>+@'p@{;
  _TNX~P~K#{; d~@M<

42 bytes
http://codegolf.stackexchange.com/a/67683/39407
